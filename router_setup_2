# Setting router's time and name
# $i : Wifi's SSID

if [ -z "$1" ]; then
        echo "We need argument to set this Wifi's SSID"
        exit
fi
sleep 1

# package install part

opkg update
opkg install prometheus-node-exporter-lua  \
prometheus-node-exporter-lua-nat_traffic \
prometheus-node-exporter-lua-netstat prometheus-node-exporter-lua-openwrt \
prometheus-node-exporter-lua-wifi \
prometheus-node-exporter-lua-wifi_stations \
hostapd-utils \
opkg install qos-scripts
sleep 1

# enable OpenWrt_wifi

uci set wireless.radio0.disabled=0
uci set wireless.default_radio0.ssid=$1
uci commit wireless
sleep 1

# enable prometheus metric collect

uci set prometheus-node-exporter-lua.main.listen_interface='*'
uci commit prometheus-node-exporter-lua
/etc/init.d/prometheus-node-exporter-lua restart
sleep

# QoS Config file Setting

uci set qos.wan.upload='40000'
uci set qos.wan.upload='40000'
uci commit qos
/etc/init.d/qos restart
/etc/init.d/network restart
